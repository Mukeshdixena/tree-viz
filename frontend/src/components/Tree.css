/* Tree Wrapper */
.tree-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: auto;
    padding: 20px 50px;
    overflow: visible;
}

/* Tree Node Structure */
.tree-node {
    display: flex;
    align-items: flex-start;
    /* Align to top for better multi-line support */
    gap: 40px;
    position: relative;
    padding: 10px 0;
}

/* Node Content Box */
.node-content {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 16px;
    min-width: 180px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.node-content:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    border-color: #3b82f6;
}

.node-actions-overlay {
    position: absolute;
    top: -20px;
    right: 0;
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: all 0.2s ease;
    z-index: 20;
    pointer-events: none;
}

.node-content:hover .node-actions-overlay {
    opacity: 1;
    transform: translateY(-5px);
    pointer-events: auto;
}

.node-action-btn {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #e2e8f0;
    background: white;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    color: #64748b;
    transition: all 0.2s;
}

.node-action-btn:hover {
    transform: scale(1.1);
}

.node-action-btn.edit:hover {
    color: #3b82f6;
    border-color: #3b82f6;
}

.node-action-btn.add:hover {
    color: #10b981;
    border-color: #10b981;
}

.node-action-btn.delete:hover {
    color: #f43f5e;
    border-color: #f43f5e;
}

.node-content.expanded {
    border-color: #3b82f6;
    background: #ffffff;
}

.node-content.completed {
    background: #f0fdf4;
    border-color: #22c55e;
}

.node-content.has-children {
    padding-right: 12px;
}

.node-info {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
}

.checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #cbd5e1;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    background: white;
    flex-shrink: 0;
}

.checkbox.checked {
    background: #22c55e;
    border-color: #22c55e;
    color: white;
}

.node-label {
    font-weight: 600;
    font-size: 14px;
    color: #1e293b;
    line-height: 1.4;
}

.expand-icon {
    font-size: 18px;
    margin-left: 8px;
    color: #cbd5e1;
    transition: transform 0.3s;
}

.node-content.expanded .expand-icon {
    transform: rotate(90deg);
    color: #3b82f6;
}

.node-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    margin-top: 4px;
}

.progress-mini {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
}

.progress-bar-bg {
    height: 6px;
    background: #f1f5f9;
    border-radius: 10px;
    flex: 1;
    overflow: hidden;
}

.progress-bar-fill {
    height: 100%;
    background: #3b82f6;
    border-radius: 10px;
    transition: width 0.4s ease-out;
}

.completed .progress-bar-fill {
    background: #22c55e;
}

.status-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    transition: all 0.2s;
}

.status-icon.todo {
    color: #cbd5e1;
}

.status-icon.in-progress {
    color: #3b82f6;
}

.status-icon.done {
    color: #22c55e;
}

.node-status-trigger {
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2px;
    border-radius: 6px;
}

.node-status-trigger:hover {
    background: #f1f5f9;
}

.node-label-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.node-has-notes {
    color: #94a3b8;
}

.node-content.status-in-progress {
    border-left: 4px solid #3b82f6;
}

.node-content.status-done {
    background: #f0fdf4;
    border-color: #22c55e;
}

.node-action-btn.details:hover {
    color: #8b5cf6;
    border-color: #8b5cf6;
}

.progress-text {
    font-size: 11px;
    font-weight: 700;
    color: #64748b;
    min-width: 30px;
}

.completed .progress-text {
    color: #15803d;
}

/* Children Container */
.children-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    /* Vertical spacing between siblings */
    position: relative;
    padding-left: 30px;
    /* Space for vertical line and curve */
    border-left: 2px dashed #e2e8f0;
    /* The main vertical line */
    /* To make connection better, we can hide the border and use pseudo elements on children? 
     Actually, let's try to center the vertical line relative to parent?
     If parent is centered, the vertical line (border-left) is to the right of parent.
     We need a horizontal line from parent to this border. 
  */
}

/* Connector from Parent to Children Container */
/* We need a line from Right of Parent to Left of Children Container */
/* Since they are flex items in .tree-node, we can put a pseudo-element on .node-content::after */

.node-content.has-children::after {
    content: '';
    position: absolute;
    right: -40px;
    top: 26px;
    /* Center of the info section */
    width: 40px;
    height: 2px;
    background: #cbd5e1;
    z-index: 0;
}

.node-content.expanded::after {
    background: #3b82f6;
    /* Highlight path if expanded? Optional */
}

/* Individual Child Wrapper */
.child-wrapper {
    display: flex;
    align-items: center;
    position: relative;
}

/* Horizontal line from Vertical Bar (border-left of container) to Child Node */
.child-wrapper::before {
    content: '';
    position: absolute;
    left: -30px;
    top: 36px;
    /* Centered relative to tree-node padding and node-info */
    width: 30px;
    height: 2px;
    background: #cbd5e1;
}

/* Refined Connector logic to make it look like a tree */
/* Hide the main vertical border if we want curved lines, but for straight lines recursion:
   The vertical line (border-left of children-container) spans entire height.
   This looks a bit "blocky" but is correct for directory trees.
   
   To make it look like "Mind Map" (branching from center):
   We need SVG or complex CSS.
   Let's stick to the blocky tree structure as it's robust.
*/

/* Tweaks for premium feel */
.icon-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
}

.leaf-node-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
}